# 第一次训练到L0的流程

1. DP和UP都处于Detect
2. DP和UP进入Polling.Active，开始发TS1 OS（PAD/PAD）
3. 假设DP先发完1024个TS1 OS（PAD/PAD），则接收到8个连续的TS1 OS（PAD/PAD）后，DP进入Polling.Configuration，而后开始发送TS2 OS（PAD/PAD）。而后UP也发完了1024个TS1 OS（PAD/PAD），则接收到8个连续的TS2 OS（PAD/PAD）后，UP也进入Polling.Configuration，开始发送TS2 OS（PAD/PAD）
4. DP接收到8个TS2 OS（PAD/PAD），且已经发送出去了16个TS2 OS（PAD/PAD），则先进入Configuration.LinkWidth.Start，开始发送TS1 OS（non-PAD/PAD）。而UP在接收到8个TS2 OS（PAD/PAD）之后，发送出去了16个TS2 OS（PAD/PAD），也进入了Configuration.LinkWidth.Start，开始发送TS1 OS（PAD/PAD）
5. 接收到2个TS1 OS（non-PAD/PAD）之后，UP先进入Configuration.LinkWidth.Accept，而后发送TS1 OS（non-PAD/PAD）。当DP接收到UP返回的2个TS1 OS（non-PAD/PAD）之后，DP进入Configuration.LinkWidth.Accept，发送TS1 OS（non-PAD/non-PAD）
6. DP立即进入Configuration.Lanenum.Wait（DP到底啥时候进入由具体实现决定，可能是开始发送TS1 OS（non-PAD/non-PAD）后进入，也有可能是先进入，而后发送TS1 OS（non-PAD/non-PAD））。UP接收到2个TS1 OS（non-PAD/non-PAD）之后，发送TS1 OS（non-PAD/non-PAD），而后进入Configuration.Lanenum.Wait。
7. DP接收到UP返回的2个TS1 OS（non-PAD/non-PAD），进入Configuration.Lanenum.Accept。DP决定能否形成一条link，能的话，继续发送TS1 OS（non-PAD/non-PAD）。UP接收到DP返回的TS1 OS（non-PAD/non-PAD），进入Configuration.Lanenum.Accept，继续发送TS1 OS（non-PAD/non-PAD）。注意，UP进入Configuration.Lanenum.Accept的时间不一定。也有可能是DP已经进入Configuration.Complete了，开始发送TS2 OS（non-PAD/non-PAD）了，UP通过收到2个TS2 OS（non-PAD/non-PAD）来进入Configuration.Lanenum.Accept
8. DP接收到UP返回的2个TS1 OS（non-PAD/non-PAD），进入Configuration.Complete，并且开始发送TS2 OS（non-PAD/non-PAD）。
9. UP接收到2个TS2 OS（non-PAD/non-PAD），进入Configuration.Complete，并且开始发送TS2 OS（non-PAD/non-PAD）
10. DP接收到8个TS2 OS（non-PAD/non-PAD），进入Configuration.Idle。UP接收到8个TS2 OS（non-PAD/non-PAD），进入Configuration.Idle。
11. 在Configuration.Idel state，link两端开始发送IDLE dta，并且等待接收到足够数量的idle data，从而进入L0.其实在Configuration.Idle中，LinkUp就为1b了